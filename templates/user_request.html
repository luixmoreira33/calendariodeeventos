{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block extrastyle %}
{{ block.super }}
<style>
    .user-panel, .nav-item, #jazzy-navbar {
        display: none !important;
    }
    .user-request-form {
        max-width: 600px;
        margin: 2rem auto;
        padding: 2rem;
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .form-group {
        margin-bottom: 1rem;
    }
    .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: bold;
    }
    .form-group input,
    .form-group textarea {
        width: 100%;
        padding: 0.5rem;
        border: 1px solid #ddd;
        border-radius: 4px;
    }
    .form-group textarea {
        min-height: 100px;
    }
    .form-group select {
        width: 100%;
        padding: 0.5rem;
        border: 1px solid #ddd;
        border-radius: 4px;
        background-color: white;
    }
    .submit-row {
        margin-top: 2rem;
        text-align: right;
    }
    .submit-row input {
        background: #79aec8;
        color: #fff;
        padding: 10px 15px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
    .submit-row input:hover {
        background: #417690;
    }
    .submit-row input:disabled {
        background: #cccccc;
        cursor: not-allowed;
    }
    .submit-row input.loading {
        position: relative;
        color: transparent;
    }
    .submit-row input.loading::after {
        content: "Enviando...";
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        color: #fff;
    }
    .messages {
        margin: 1rem 0;
        padding: 1rem;
        border-radius: 4px;
    }
    .success {
        background: #dff0d8;
        color: #3c763d;
        border: 1px solid #d6e9c6;
    }
    .error {
        background: #f2dede;
        color: #a94442;
        border: 1px solid #ebccd1;
    }
    .form-group.checkbox-group {
        display: flex;
        align-items: center;
        gap: 8px;
    }
    .form-group.checkbox-group label {
        margin-bottom: 0;
        font-weight: normal;
    }
    #id_terms_accepted {
        margin-left: 2px;
    }
    .form-check-label {
        margin-left: 20px;
    }
</style>
{% endblock %}

{% block content %}
<div class="user-request-form">
    <h1>Solicitação de Cadastro de Usuário</h1>

    <form method="post" id="userRequestForm">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="id_name">Nome:</label>
            {{ form.name }}
            {% if form.name.errors %}
            <div class="error">{{ form.name.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="id_surname">Sobrenome:</label>
            {{ form.surname }}
            {% if form.surname.errors %}
            <div class="error">{{ form.surname.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="id_email">Email:</label>
            {{ form.email }}
            {% if form.email.errors %}
            <div class="error">{{ form.email.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="id_phone">Telefone:</label>
            {{ form.phone }}
            {% if form.phone.errors %}
            <div class="error">{{ form.phone.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="id_profession">Profissão:</label>
            {{ form.profession }}
            {% if form.profession.errors %}
            <div class="error">{{ form.profession.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="id_lodge_name">Nome da Loja:</label>
            {{ form.lodge_name }}
            {% if form.lodge_name.errors %}
            <div class="error">{{ form.lodge_name.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="id_lodge_number">Número da Loja:</label>
            {{ form.lodge_number }}
            {% if form.lodge_number.errors %}
            <div class="error">{{ form.lodge_number.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="id_message">Mensagem (opcional):</label>
            {{ form.message }}
            {% if form.message.errors %}
            <div class="error">{{ form.message.errors }}</div>
            {% endif %}
        </div>

        <div class="">
            {{ form.terms_accepted }}
            <label class="form-check-label" for="id_terms_accepted">Autorizo compartilhar minhas informações com a plataforma</label>
            {% if form.terms_accepted.errors %}
            <div class="error">{{ form.terms_accepted.errors }}</div>
            {% endif %}
        </div>

        <div class="submit-row">
            <input type="submit" value="Enviar Solicitação" id="submitButton">
        </div>
    </form>

    <script>
        document.getElementById('userRequestForm').addEventListener('submit', function(e) {
            const submitButton = document.getElementById('submitButton');
            submitButton.disabled = true;
            submitButton.classList.add('loading');
        });
    </script>
</div>
{% endblock %} 